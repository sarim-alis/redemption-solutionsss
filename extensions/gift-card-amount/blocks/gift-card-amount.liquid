{{ 'gift-card-amount.css' | asset_url | stylesheet_tag }}

<div class="jiffy-gift-card-container">
  <div class="gift-card-wrapper">
    <!-- Gift Card Image -->
    <div class="gift-card-image">
      {% if block.settings.card_image != blank %}
        <img src="{{ block.settings.card_image | img_url: '400x250' }}" 
             alt="{{ block.settings.card_title | default: 'Gift Card' }}"
             width="400" 
             height="250">
      {% else %}
        <div class="default-gift-card">
          <div class="gift-card-text">
            <h2>GIFT<br>CARD</h2>
            <div class="card-logo">{{ block.settings.card_title | default: 'GIFT CARD' }}</div>
          </div>
        </div>
      {% endif %}
    </div>

    <!-- Gift Card Form -->
    <div class="gift-card-form">
      <form action="{{ routes.cart_add_url }}" method="post" enctype="multipart/form-data" class="gift-card-add-form">
        <input type="hidden" name="id" value="{{ block.settings.gift_card_product.selected_or_first_available_variant.id }}">
        
        <!-- Amount Input Field -->
        <div class="amount-input-container">
          <span class="currency-symbol">$</span>
          <input type="number" 
                 name="attributes[Gift_Card_Amount]" 
                 placeholder="Enter Amount" 
                 min="{{ block.settings.min_amount | default: 1 }}"
                 max="{{ block.settings.max_amount | default: 1000 }}"
                 step="0.01"
                 class="amount-input"
                 required>
        </div>

        <!-- Quantity Controls -->
        <div class="quantity-section">
          <div class="quantity-controls">
            <button type="button" class="quantity-btn minus-btn">âˆ’</button>
            <input type="number" name="quantity" value="1" min="1" max="10" class="quantity-input" readonly>
            <button type="button" class="quantity-btn plus-btn">+</button>
          </div>
        </div>

        <!-- Add to Cart Button -->
        <button type="submit" class="add-to-cart-btn">
          {{ block.settings.button_text | default: 'ADD TO CART' }}
        </button>
      </form>
    </div>
  </div>
</div>

<script src="{{ 'gift-card-amount.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Custom Gift Card Amount",
  "target": "section",
  "settings": [
    {
      "type": "header",
      "content": "Gift Card Settings"
    },
    {
      "type": "product",
      "id": "gift_card_product",
      "label": "Select Gift Card Product",
      "info": "Choose the gift card product from your store"
    },
    {
      "type": "image_picker",
      "id": "card_image",
      "label": "Gift Card Design Image"
    },
    {
      "type": "text",
      "id": "card_title",
      "label": "Card Title",
      "default": "GIFT CARD"
    },
    {
      "type": "number",
      "id": "min_amount",
      "label": "Minimum Amount",
      "default": 1
    },
    {
      "type": "number",
      "id": "max_amount", 
      "label": "Maximum Amount",
      "default": 1000
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "ADD TO CART"
    },
    {
      "type": "color",
      "id": "card_bg_color",
      "label": "Card Background Color",
      "default": "#8b2635"
    },
    {
      "type": "color",
      "id": "button_bg_color", 
      "label": "Button Background Color",
      "default": "#8b2635"
    }
  ]
}
{% endschema %}
